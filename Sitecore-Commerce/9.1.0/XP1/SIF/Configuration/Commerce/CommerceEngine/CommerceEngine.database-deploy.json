{
  "Parameters": {
	"CommerceServicesDbServer": 
	{ 
		"Type": "string", 
		"Description": "Commerce Engine database server name" 
	},		
    "CommerceServicesDbName": 
	{ 
		"Type": "string", 
		"Description": "Commerce Services database name" 
	},
    "CommerceServicesGlobalDbName": 
	{ 
		"Type": "string", 
		"Description": "Commerce Services Global database name" 
	},
    "SitecoreDbServer": 
	{ 
		"Type": "string", 
		"Description": "Sitecore database server name" 
	},
    "SitecoreCoreDbName": 
	{ 
		"Type": "string", 
		"Description": "Sitecore Core database name" 
	},
    "CommerceEngineDacPac": 
	{ 
		"Type": "string", 
		"Description": "Commerce Engine DacPac" 
	},
    "UserDomain": 
	{ 
		"Type": "string", 
		"DefaultValue": "$env:COMPUTERNAME" 
	},
    "UserName": 
	{ 
		"Type": "string", 
		"Description": "User Name for Commerce Services App Pool" 
	}
  },
  "Variables": {
  },
  "Modules": [
    "ManageCommerceService",
    "DeployCommerceDatabase",
    "DeployCommerceContent",
    "WindowsLocal",
    "SitecoreUtilityTasks"
  ],
  "Tasks": {
    "DeployCommerceDatabase": {
      "Type": "DeployCommerceDatabase",
      "Params": {
        "CommerceServicesDbServer": "[parameter('CommerceServicesDbServer')]",
        "CommerceServicesDbName": "[parameter('CommerceServicesDbName')]",
        "CommerceServicesGlobalDbName": "[parameter('CommerceServicesGlobalDbName')]",
        "CommerceEngineDacPac": "[parameter('CommerceEngineDacPac')]",
        "UserName": "[concat(parameter('UserDomain'), concat('\\', parameter('UserName')))]"
      }
    },
    "AddCommerceUserToCoreDatabase": {
      "Type": "AddCommerceUserToCoreDatabase",
      "Params": {
        "SitecoreDbServer": "[parameter('SitecoreDbServer')]",
        "SitecoreCoreDbName": "[parameter('SitecoreCoreDbName')]",
        "UserName": "[concat(parameter('UserDomain'), concat('\\', parameter('UserName')))]"
      }
    }    
  }
}